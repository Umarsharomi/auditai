<!DOCTYPE html>
<html lang="en">
<head>
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>emailjs.init('r_pXgkfgPYYzSaHtd');</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AuditAI App ‚Äî Smart Contract Security Platform</title>
<meta name="description" content="AI-powered smart contract security scanner. Audit, analyze tokens, compare contracts and get AI-generated fixes.">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;600;700;800&display=swap');
  :root{--bg:#050A0E;--surface:#0C1419;--surface2:#111D24;--border:#1A2A35;--accent:#00FF88;--accent2:#00C4FF;--danger:#FF4560;--warn:#FFB800;--purple:#A855F7;--text:#E0EEF5;--muted:#4A6070;--font-display:'Syne',sans-serif;--font-mono:'Space Mono',monospace}
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:var(--bg);color:var(--text);font-family:var(--font-mono);min-height:100vh;overflow-x:hidden}
  body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(0,255,136,0.025) 1px,transparent 1px),linear-gradient(90deg,rgba(0,255,136,0.025) 1px,transparent 1px);background-size:40px 40px;pointer-events:none;z-index:0}
  .container{max-width:1100px;margin:0 auto;padding:0 24px;position:relative;z-index:1}

  /* Header */
  header{padding:20px 0;border-bottom:1px solid var(--border);margin-bottom:28px}
  .header-inner{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px}
  .logo{display:flex;align-items:center;gap:10px;text-decoration:none}
  .logo-icon{width:32px;height:32px;display:flex;align-items:center;justify-content:center;font-size:15px;color:var(--accent);clip-path:polygon(50% 0%,100% 25%,100% 75%,50% 100%,0% 75%,0% 25%);background:rgba(0,255,136,0.08);border:1px solid rgba(0,255,136,0.3)}
  .logo-text{font-family:var(--font-display);font-size:19px;font-weight:800;color:var(--text)}
  .logo-text span{color:var(--accent)}
  .header-right{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
  .hbtn{display:flex;align-items:center;gap:6px;padding:7px 13px;background:transparent;border:1px solid var(--border);color:var(--muted);font-family:var(--font-mono);font-size:10px;letter-spacing:1px;cursor:pointer;transition:all 0.2s;text-transform:uppercase;text-decoration:none}
  .hbtn:hover{border-color:var(--accent2);color:var(--accent2)}
  .hbtn.connected{border-color:var(--accent);color:var(--accent)}
  .wdot{width:6px;height:6px;border-radius:50%;background:var(--muted);transition:background 0.3s}
  .hbtn.connected .wdot{background:var(--accent);animation:pulse 2s infinite}
  .badge{font-size:9px;padding:3px 7px;border:1px solid var(--accent);color:var(--accent);letter-spacing:2px;text-transform:uppercase}

  @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.3}}
  @keyframes spin{to{transform:rotate(360deg)}}
  @keyframes fadeUp{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}

  /* Nav Tabs */
  .nav-tabs{display:flex;gap:2px;margin-bottom:28px;border-bottom:1px solid var(--border);overflow-x:auto}
  .nav-tab{padding:11px 18px;background:transparent;border:none;border-bottom:2px solid transparent;color:var(--muted);font-family:var(--font-mono);font-size:10px;letter-spacing:1px;cursor:pointer;transition:all 0.2s;text-transform:uppercase;white-space:nowrap;display:flex;align-items:center;gap:6px}
  .nav-tab:hover{color:var(--text)}
  .nav-tab.active{color:var(--accent);border-bottom-color:var(--accent)}

  /* Sections */
  .section{display:none;animation:fadeUp 0.4s ease}
  .section.active{display:block}

  /* Panel */
  .panel{background:var(--surface);border:1px solid var(--border);overflow:hidden;margin-bottom:2px}
  .panel-header{display:flex;align-items:center;justify-content:space-between;padding:10px 15px;border-bottom:1px solid var(--border);background:var(--surface2)}
  .panel-title{font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--muted);display:flex;align-items:center;gap:6px}
  .live-dot{width:5px;height:5px;border-radius:50%;background:var(--accent);animation:pulse 2s infinite}
  .dot-row{display:flex;gap:5px}
  .dot{width:9px;height:9px;border-radius:50%}
  .dot.r{background:#FF5F57}.dot.y{background:#FFBD2E}.dot.g{background:#28C840}

  textarea{width:100%;min-height:240px;background:transparent;border:none;outline:none;color:var(--accent2);font-family:var(--font-mono);font-size:12px;line-height:1.8;padding:15px;resize:vertical;tab-size:2}
  textarea::placeholder{color:var(--muted)}
  input[type=text],input[type=email]{background:var(--bg);border:1px solid var(--border);color:var(--text);font-family:var(--font-mono);font-size:12px;padding:10px 14px;outline:none;width:100%;transition:border-color 0.2s}
  input[type=text]:focus,input[type=email]:focus{border-color:var(--accent2)}

  .example-bar{padding:8px 15px;border-top:1px solid var(--border);display:flex;align-items:center;gap:7px;flex-wrap:wrap}
  .ex-label{font-size:10px;color:var(--muted);letter-spacing:1px;text-transform:uppercase}
  .ex-btn{font-family:var(--font-mono);font-size:10px;padding:3px 9px;background:transparent;border:1px solid var(--border);color:var(--muted);cursor:pointer;transition:all 0.2s}
  .ex-btn:hover{border-color:var(--accent);color:var(--accent)}

  /* Address scanner */
  .addr-row{display:flex;gap:8px;padding:12px 15px;border-top:1px solid var(--border);flex-wrap:wrap}
  .addr-input{flex:1;min-width:200px}
  .addr-btn{padding:10px 18px;background:transparent;border:1px solid var(--accent2);color:var(--accent2);font-family:var(--font-mono);font-size:10px;letter-spacing:1px;cursor:pointer;transition:all 0.2s;text-transform:uppercase;white-space:nowrap;display:flex;align-items:center;gap:6px}
  .addr-btn:hover{background:rgba(0,196,255,0.1)}
  .addr-btn:disabled{border-color:var(--border);color:var(--muted);cursor:not-allowed}

  /* Buttons */
  .run-btn{width:100%;padding:14px;background:var(--accent);color:var(--bg);border:none;font-family:var(--font-display);font-size:13px;font-weight:700;letter-spacing:1px;cursor:pointer;transition:all 0.2s;text-transform:uppercase}
  .run-btn:hover{background:#00e07a;transform:translateY(-1px);box-shadow:0 8px 24px rgba(0,255,136,0.25)}
  .run-btn:disabled{background:var(--surface2);color:var(--muted);cursor:not-allowed;transform:none;box-shadow:none}
  .run-btn.blue{background:var(--accent2);color:var(--bg)}
  .run-btn.blue:hover{background:#00aee0;box-shadow:0 8px 24px rgba(0,196,255,0.25)}
  .run-btn.purple{background:var(--purple);color:#fff}
  .run-btn.orange{background:var(--warn);color:var(--bg)}

  .btn-inner{display:flex;align-items:center;justify-content:center;gap:8px}
  .loader{display:none;align-items:center;gap:8px}
  .loader.active{display:flex}
  .spinner{width:13px;height:13px;border:2px solid var(--bg);border-top-color:transparent;border-radius:50%;animation:spin 0.6s linear infinite}

  .action-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:14px}
  .action-btn{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:transparent;border:1px solid var(--border);color:var(--muted);font-family:var(--font-mono);font-size:10px;letter-spacing:1px;cursor:pointer;transition:all 0.2s;text-transform:uppercase}
  .action-btn:hover{border-color:var(--accent);color:var(--accent)}
  .action-btn.blue{border-color:var(--accent2);color:var(--accent2)}
  .action-btn.blue:hover{background:rgba(0,196,255,0.08)}

  /* Results */
  .results{display:none;margin-top:20px}
  .results.visible{display:block;animation:fadeUp 0.4s ease}

  .score-card{background:var(--surface);border:1px solid var(--border);padding:22px;margin-bottom:16px;display:flex;align-items:center;gap:22px;flex-wrap:wrap}
  .score-circle{width:88px;height:88px;border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;border:3px solid;flex-shrink:0}
  .score-circle.high{border-color:var(--accent);color:var(--accent)}
  .score-circle.medium{border-color:var(--warn);color:var(--warn)}
  .score-circle.low{border-color:var(--danger);color:var(--danger)}
  .score-num{font-family:var(--font-display);font-size:26px;font-weight:800;line-height:1}
  .score-lbl{font-size:9px;letter-spacing:2px;text-transform:uppercase;margin-top:2px}
  .score-info{flex:1;min-width:180px}
  .score-title{font-family:var(--font-display);font-size:17px;font-weight:700;margin-bottom:5px}
  .score-summary{color:var(--muted);font-size:11px;line-height:1.8}
  .pills{display:flex;gap:7px;margin-top:10px;flex-wrap:wrap}
  .pill{font-size:10px;padding:2px 8px;letter-spacing:1px;text-transform:uppercase;border:1px solid}
  .pill.critical{border-color:var(--danger);color:var(--danger);background:rgba(255,69,96,0.08)}
  .pill.high{border-color:var(--warn);color:var(--warn);background:rgba(255,184,0,0.08)}
  .pill.medium{border-color:var(--accent2);color:var(--accent2);background:rgba(0,196,255,0.08)}
  .pill.low{border-color:var(--muted);color:var(--muted)}
  .pill.safe{border-color:var(--accent);color:var(--accent);background:rgba(0,255,136,0.08)}

  .share-bar{display:flex;align-items:center;gap:8px;padding:9px 13px;background:var(--surface2);border:1px solid var(--border);margin-bottom:14px;flex-wrap:wrap}
  .share-lbl{font-size:10px;color:var(--muted);letter-spacing:1px;text-transform:uppercase;white-space:nowrap}
  .share-input{flex:1;min-width:80px;background:var(--bg);border:1px solid var(--border);color:var(--accent2);font-family:var(--font-mono);font-size:10px;padding:5px 9px;outline:none}
  .copy-btn{padding:5px 11px;background:transparent;border:1px solid var(--accent);color:var(--accent);font-family:var(--font-mono);font-size:10px;letter-spacing:1px;cursor:pointer;transition:all 0.2s;text-transform:uppercase;white-space:nowrap}
  .copy-btn:hover{background:rgba(0,255,136,0.1)}
  .copy-btn.copied{border-color:var(--accent2);color:var(--accent2)}

  /* Social share */
  .social-share{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:14px}
  .social-btn{display:inline-flex;align-items:center;gap:6px;padding:7px 14px;background:transparent;border:1px solid var(--border);color:var(--muted);font-family:var(--font-mono);font-size:10px;letter-spacing:1px;cursor:pointer;transition:all 0.2s;text-transform:uppercase;text-decoration:none}
  .social-btn.twitter:hover{border-color:#1DA1F2;color:#1DA1F2}
  .social-btn.telegram:hover{border-color:#2CA5E0;color:#2CA5E0}
  .social-btn.copy:hover{border-color:var(--accent);color:var(--accent)}

  /* Email modal */
  .modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.8);z-index:200;backdrop-filter:blur(4px);align-items:center;justify-content:center}
  .modal-overlay.open{display:flex}
  .modal{background:var(--surface);border:1px solid var(--border);padding:32px;width:100%;max-width:440px;animation:fadeUp 0.3s ease}
  .modal-title{font-family:var(--font-display);font-size:20px;font-weight:700;margin-bottom:6px}
  .modal-sub{color:var(--muted);font-size:12px;line-height:1.8;margin-bottom:20px}
  .modal-close{position:absolute;top:16px;right:16px;background:transparent;border:1px solid var(--border);color:var(--muted);width:28px;height:28px;cursor:pointer;font-size:13px;display:flex;align-items:center;justify-content:center;transition:all 0.2s}
  .modal-close:hover{border-color:var(--danger);color:var(--danger)}
  .modal-form{display:flex;flex-direction:column;gap:10px;position:relative}
  .modal-label{font-size:10px;letter-spacing:1px;text-transform:uppercase;color:var(--muted);margin-bottom:3px}
  .modal-send{padding:12px;background:var(--accent);color:var(--bg);border:none;font-family:var(--font-display);font-size:13px;font-weight:700;letter-spacing:1px;cursor:pointer;transition:all 0.2s;text-transform:uppercase}
  .modal-send:hover{background:#00e07a}
  .modal-send:disabled{background:var(--surface2);color:var(--muted);cursor:not-allowed}

  .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:10px;margin-bottom:16px}
  .stat-card{background:var(--surface);border:1px solid var(--border);padding:13px}
  .stat-card-title{font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-bottom:4px}
  .stat-card-val{font-family:var(--font-display);font-size:18px;font-weight:700;color:var(--accent)}

  .findings-grid{display:grid;gap:10px;margin-bottom:16px}
  .finding{background:var(--surface);border:1px solid var(--border);border-left:3px solid;padding:15px;transition:transform 0.2s}
  .finding:hover{transform:translateX(3px)}
  .finding.critical{border-left-color:var(--danger)}
  .finding.high{border-left-color:var(--warn)}
  .finding.medium{border-left-color:var(--accent2)}
  .finding.low{border-left-color:var(--muted)}
  .finding-hdr{display:flex;align-items:center;gap:8px;margin-bottom:6px;flex-wrap:wrap}
  .f-sev{font-size:9px;padding:2px 6px;letter-spacing:2px;text-transform:uppercase;border:1px solid currentColor}
  .finding.critical .f-sev{color:var(--danger)}
  .finding.high .f-sev{color:var(--warn)}
  .finding.medium .f-sev{color:var(--accent2)}
  .finding.low .f-sev{color:var(--muted)}
  .f-title{font-family:var(--font-display);font-size:13px;font-weight:700}
  .f-desc{color:var(--muted);font-size:11px;line-height:1.8;margin-bottom:8px}
  .f-rec{background:var(--surface2);border:1px solid var(--border);padding:8px 12px;font-size:11px;color:var(--accent);line-height:1.8}
  .f-rec::before{content:'‚Üí FIX: ';opacity:0.6}

  /* Token */
  .token-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:10px;margin-bottom:16px}
  .token-card{background:var(--surface);border:1px solid var(--border);padding:16px}
  .token-card-title{font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-bottom:7px}
  .token-card-val{font-family:var(--font-display);font-size:20px;font-weight:800}
  .token-card-val.safe{color:var(--accent)}.token-card-val.warn{color:var(--warn)}.token-card-val.danger{color:var(--danger)}
  .token-card-sub{font-size:10px;color:var(--muted);margin-top:3px}
  .risk-bar-wrap{background:var(--surface);border:1px solid var(--border);padding:18px;margin-bottom:16px}
  .risk-bar-title{font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-bottom:12px}
  .risk-row{display:flex;align-items:center;gap:10px;margin-bottom:9px}
  .risk-label{font-size:11px;color:var(--muted);width:120px;flex-shrink:0}
  .risk-track{flex:1;height:5px;background:var(--border);overflow:hidden}
  .risk-fill{height:100%;transition:width 0.8s ease}
  .risk-fill.low-r{background:var(--accent)}.risk-fill.med-r{background:var(--warn)}.risk-fill.high-r{background:var(--danger)}
  .risk-pct{font-size:11px;font-family:var(--font-display);font-weight:700;width:34px;text-align:right}

  /* Compare */
  .compare-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
  @media(max-width:700px){.compare-grid{grid-template-columns:1fr}}
  .diff-section{background:var(--surface);border:1px solid var(--border);padding:16px;margin-bottom:14px}
  .diff-title{font-family:var(--font-display);font-size:13px;font-weight:700;margin-bottom:10px;display:flex;align-items:center;gap:7px}
  .diff-badge{font-size:9px;padding:2px 6px;border:1px solid;letter-spacing:1px;text-transform:uppercase}
  .diff-badge.a{border-color:var(--accent2);color:var(--accent2)}.diff-badge.b{border-color:var(--purple);color:var(--purple)}.diff-badge.both{border-color:var(--warn);color:var(--warn)}
  .diff-item{padding:7px 10px;margin-bottom:5px;font-size:11px;line-height:1.7;border-left:3px solid}
  .diff-item.only-a{border-left-color:var(--accent2);background:rgba(0,196,255,0.05)}
  .diff-item.only-b{border-left-color:var(--purple);background:rgba(168,85,247,0.05)}
  .diff-item.shared{border-left-color:var(--warn);background:rgba(255,184,0,0.05)}
  .winner-banner{background:var(--surface2);border:1px solid var(--accent);padding:14px 18px;margin-bottom:16px;display:flex;align-items:center;gap:12px}
  .winner-name{font-family:var(--font-display);font-size:18px;font-weight:800;color:var(--accent)}

  /* Fix */
  .fix-changes{display:grid;gap:8px;margin-bottom:16px}
  .fix-change{background:var(--surface);border:1px solid var(--border);border-left:3px solid var(--accent);padding:12px}
  .fix-change-title{font-family:var(--font-display);font-size:12px;font-weight:700;margin-bottom:4px;color:var(--accent)}
  .fix-change-desc{font-size:11px;color:var(--muted);line-height:1.8}
  .fix-code{padding:16px;font-family:var(--font-mono);font-size:11px;line-height:1.8;color:var(--accent);white-space:pre-wrap;overflow-x:auto;max-height:440px;overflow-y:auto}

  /* Leaderboard */
  .lb-header{display:grid;grid-template-columns:36px 1fr 70px 90px 70px;gap:10px;padding:9px 14px;background:var(--surface2);border:1px solid var(--border);font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-bottom:2px}
  .lb-row{display:grid;grid-template-columns:36px 1fr 70px 90px 70px;gap:10px;padding:12px 14px;background:var(--surface);border:1px solid var(--border);margin-bottom:2px;transition:all 0.2s;align-items:center}
  .lb-row:hover{transform:translateX(3px)}
  .lb-rank{font-family:var(--font-display);font-size:15px;font-weight:800;color:var(--muted)}
  .lb-rank.gold{color:#FFD700}.lb-rank.silver{color:#C0C0C0}.lb-rank.bronze{color:#CD7F32}
  .lb-contract-name{font-family:var(--font-display);font-size:12px;font-weight:700;margin-bottom:2px}
  .lb-contract-date{font-size:10px;color:var(--muted)}
  .lb-score{font-family:var(--font-display);font-size:17px;font-weight:800}
  .lb-score.high{color:var(--accent)}.lb-score.medium{color:var(--warn)}.lb-score.low{color:var(--danger)}
  .lb-verdict{font-size:10px;letter-spacing:1px;text-transform:uppercase}
  .lb-issues{font-family:var(--font-display);font-size:15px;font-weight:700;color:var(--muted)}
  .lb-issues.zero{color:var(--accent)}
  .lb-tabs{display:flex;gap:2px;margin-bottom:14px}
  .lb-tab{padding:7px 14px;background:transparent;border:1px solid var(--border);color:var(--muted);font-family:var(--font-mono);font-size:10px;letter-spacing:1px;cursor:pointer;transition:all 0.2s;text-transform:uppercase}
  .lb-tab.active{border-color:var(--accent);color:var(--accent)}
  .lb-empty{text-align:center;padding:40px;color:var(--muted);font-size:12px;line-height:2}

  /* History Drawer */
  .drawer-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.7);z-index:100;backdrop-filter:blur(4px)}
  .drawer-overlay.open{display:block}
  .drawer{position:fixed;top:0;right:-440px;bottom:0;width:420px;background:var(--surface);border-left:1px solid var(--border);z-index:101;transition:right 0.3s ease;display:flex;flex-direction:column}
  .drawer.open{right:0}
  .drawer-hdr{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--border);background:var(--surface2);flex-shrink:0}
  .drawer-title{font-family:var(--font-display);font-size:14px;font-weight:700}
  .drawer-close{background:transparent;border:1px solid var(--border);color:var(--muted);width:28px;height:28px;cursor:pointer;font-size:13px;transition:all 0.2s;display:flex;align-items:center;justify-content:center}
  .drawer-close:hover{border-color:var(--danger);color:var(--danger)}
  .drawer-body{flex:1;overflow-y:auto;padding:12px}
  .h-item{background:var(--surface2);border:1px solid var(--border);padding:11px 13px;margin-bottom:7px;cursor:pointer;transition:all 0.2s}
  .h-item:hover{border-color:var(--accent2);transform:translateX(-3px)}
  .h-item-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:4px}
  .h-score{font-family:var(--font-display);font-size:15px;font-weight:800}
  .h-score.high{color:var(--accent)}.h-score.medium{color:var(--warn)}.h-score.low{color:var(--danger)}
  .h-date{font-size:10px;color:var(--muted)}
  .h-verdict{font-size:10px;letter-spacing:1px;text-transform:uppercase;margin-bottom:3px}
  .h-snippet{font-size:10px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .h-del{float:right;background:transparent;border:none;color:var(--muted);cursor:pointer;font-size:11px;padding:1px 5px;transition:color 0.2s}
  .h-del:hover{color:var(--danger)}
  .drawer-footer{padding:11px 20px;border-top:1px solid var(--border);background:var(--surface2);flex-shrink:0}
  .clear-btn{width:100%;padding:7px;background:transparent;border:1px solid var(--border);color:var(--muted);font-family:var(--font-mono);font-size:10px;letter-spacing:1px;cursor:pointer;transition:all 0.2s;text-transform:uppercase}
  .clear-btn:hover{border-color:var(--danger);color:var(--danger)}

  .toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(14px);background:var(--surface2);border:1px solid var(--accent);color:var(--accent);font-size:11px;letter-spacing:1px;padding:8px 16px;opacity:0;transition:all 0.3s;z-index:300;pointer-events:none;white-space:nowrap}
  .toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
  .error-box{display:none;padding:11px 14px;border:1px solid var(--danger);background:rgba(255,69,96,0.08);color:var(--danger);font-size:11px;margin-top:10px}
  .error-box.visible{display:block}

  footer{margin-top:50px;padding:20px 0;border-top:1px solid var(--border);text-align:center;color:var(--muted);font-size:10px;letter-spacing:1px}
  ::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:var(--border)}
  @media(max-width:600px){.lb-header,.lb-row{grid-template-columns:28px 1fr 55px 75px}.lb-issues{display:none}.drawer{width:100%;right:-100%}}
</style>
</head>
<body>

<!-- Email Modal -->
<div class="modal-overlay" id="emailModal">
  <div class="modal" style="position:relative">
    <button class="modal-close" onclick="closeEmailModal()">‚úï</button>
    <div class="modal-title">üìß Email Report</div>
    <div class="modal-sub">Send your audit report to your email as a formatted summary.</div>
    <div class="modal-form">
      <div>
        <div class="modal-label">Your Email</div>
        <input type="email" id="emailInput" placeholder="you@example.com" />
      </div>
      <button class="modal-send" id="emailSendBtn" onclick="sendEmailReport()">
        <span id="emailBtnText">Send Report</span>
        <span id="emailBtnLoader" style="display:none">Sending...</span>
      </button>
      <div id="emailStatus" style="font-size:11px;text-align:center;color:var(--muted)"></div>
    </div>
  </div>
</div>

<!-- History Drawer -->
<div class="drawer-overlay" id="drawerOverlay" onclick="closeHistory()"></div>
<div class="drawer" id="historyDrawer">
  <div class="drawer-hdr">
    <div class="drawer-title">Audit History</div>
    <button class="drawer-close" onclick="closeHistory()">‚úï</button>
  </div>
  <div class="drawer-body" id="historyBody"></div>
  <div class="drawer-footer"><button class="clear-btn" onclick="clearHistory()">Clear All</button></div>
</div>

<div class="toast" id="toast"></div>

<div class="container">
  <header>
    <div class="header-inner">
      <a href="/" class="logo"><div class="logo-icon">‚¨°</div><div class="logo-text">Audit<span>AI</span></div></a>
      <div class="header-right">
        <a href="/" class="hbtn">‚Üê Home</a>
        <button class="hbtn" onclick="openHistory()">‚ò∞ History <span id="histCount" style="color:var(--accent)"></span></button>
        <button class="hbtn" id="walletBtn" onclick="connectWallet()"><div class="wdot" id="wdot"></div><span id="wLabel">Connect Wallet</span></button>
        <div class="badge">v0.4</div>
      </div>
    </div>
  </header>

  <nav class="nav-tabs">
    <button class="nav-tab active" onclick="switchTab('audit')">üîç Security Audit</button>
    <button class="nav-tab" onclick="switchTab('token')">ü™ô Token Analyzer</button>
    <button class="nav-tab" onclick="switchTab('compare')">‚öñÔ∏è Compare</button>
    <button class="nav-tab" onclick="switchTab('fix')">üîß Fix Suggester</button>
    <button class="nav-tab" onclick="switchTab('leaderboard')">üèÜ Leaderboard</button>
  </nav>

  <!-- ‚îÄ‚îÄ AUDIT TAB ‚îÄ‚îÄ -->
  <div class="section active" id="tab-audit">
    <div class="panel">
      <div class="panel-header">
        <div class="panel-title"><span class="live-dot"></span> Solidity Contract</div>
        <div class="dot-row"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
      </div>
      <textarea id="auditCode" placeholder="// Paste your Solidity contract here..."></textarea>
      <div class="addr-row">
        <input type="text" class="addr-input" id="addrInput" placeholder="üì° Or enter contract address: 0x... (mainnet)" />
        <button class="addr-btn" id="fetchAddrBtn" onclick="fetchContractFromAddress()">
          <span id="fetchBtnText">Fetch Contract</span>
          <div class="loader" id="fetchLoader" style="display:none"><div class="spinner" style="border-color:var(--bg);border-top-color:transparent;border:2px solid var(--accent2);border-top-color:transparent"></div></div>
        </button>
      </div>
      <div class="example-bar">
        <span class="ex-label">Examples:</span>
        <button class="ex-btn" onclick="loadEx('auditCode','erc20')">ERC20</button>
        <button class="ex-btn" onclick="loadEx('auditCode','reentrancy')">Reentrancy</button>
        <button class="ex-btn" onclick="loadEx('auditCode','vault')">CryptoVault</button>
      </div>
    </div>
    <button class="run-btn" id="auditBtn" onclick="runAudit()">
      <div class="btn-inner" id="auditBtnText">‚¨° Run Security Audit</div>
      <div class="loader" id="auditLoader"><div class="spinner"></div> Analyzing...</div>
    </button>
    <div class="error-box" id="auditError"></div>
    <div class="results" id="auditResults">
      <div class="score-card" id="auditScoreCard"></div>
      <div class="share-bar">
        <span class="share-lbl">Share:</span>
        <input class="share-input" id="auditShareLink" readonly />
        <button class="copy-btn" id="auditCopyBtn" onclick="copyLink('auditShareLink','auditCopyBtn')">Copy</button>
      </div>
      <div class="social-share" id="socialShare"></div>
      <div class="stats-grid" id="auditStatsGrid"></div>
      <div class="panel-header" style="margin-bottom:10px;background:var(--surface);border:1px solid var(--border)">
        <div class="panel-title">Findings</div>
      </div>
      <div class="findings-grid" id="auditFindings"></div>
      <div class="action-row">
        <button class="action-btn blue" onclick="downloadReport()">‚Üì Download Report</button>
        <button class="action-btn blue" onclick="openEmailModal()">üìß Email Report</button>
        <button class="action-btn" onclick="submitToLeaderboard()">üèÜ Leaderboard</button>
        <button class="action-btn" onclick="sendToFix()">üîß Fix Contract</button>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ TOKEN TAB ‚îÄ‚îÄ -->
  <div class="section" id="tab-token">
    <div class="panel">
      <div class="panel-header">
        <div class="panel-title"><span class="live-dot"></span> Token Contract</div>
        <div class="dot-row"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div>
      </div>
      <textarea id="tokenCode" placeholder="// Paste your token contract to detect honeypots, rugpulls, hidden taxes..."></textarea>
      <div class="addr-row">
        <input type="text" class="addr-input" id="tokenAddrInput" placeholder="üì° Or enter token address: 0x..." />
        <button class="addr-btn" onclick="fetchTokenFromAddress()">Fetch Token</button>
      </div>
      <div class="example-bar">
        <span class="ex-label">Examples:</span>
        <button class="ex-btn" onclick="loadEx('tokenCode','erc20')">Clean Token</button>
        <button class="ex-btn" onclick="loadEx('tokenCode','honeypot')">Honeypot</button>
      </div>
    </div>
    <button class="run-btn blue" id="tokenBtn" onclick="runTokenAnalysis()">
      <div class="btn-inner" id="tokenBtnText">ü™ô Analyze Token</div>
      <div class="loader" id="tokenLoader"><div class="spinner" style="border-color:var(--bg);border-top-color:transparent"></div> Scanning...</div>
    </button>
    <div class="error-box" id="tokenError"></div>
    <div class="results" id="tokenResults">
      <div class="token-grid" id="tokenCards"></div>
      <div class="risk-bar-wrap"><div class="risk-bar-title">Risk Breakdown</div><div id="riskBars"></div></div>
      <div class="findings-grid" id="tokenFindings"></div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ COMPARE TAB ‚îÄ‚îÄ -->
  <div class="section" id="tab-compare">
    <div class="compare-grid">
      <div class="panel">
        <div class="panel-header"><div class="panel-title" style="color:var(--accent2)">Contract A</div><div class="dot-row"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div></div>
        <textarea id="compareA" placeholder="// Paste Contract A..."></textarea>
      </div>
      <div class="panel">
        <div class="panel-header"><div class="panel-title" style="color:var(--purple)">Contract B</div><div class="dot-row"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div></div>
        <textarea id="compareB" placeholder="// Paste Contract B..."></textarea>
      </div>
    </div>
    <button class="run-btn purple" id="compareBtn" onclick="runCompare()">
      <div class="btn-inner" id="compareBtnText">‚öñÔ∏è Compare Contracts</div>
      <div class="loader" id="compareLoader"><div class="spinner" style="border-color:#fff;border-top-color:transparent"></div> Comparing...</div>
    </button>
    <div class="error-box" id="compareError"></div>
    <div class="results" id="compareResults">
      <div class="winner-banner" id="winnerBanner"></div>
      <div id="compareContent"></div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ FIX TAB ‚îÄ‚îÄ -->
  <div class="section" id="tab-fix">
    <div class="panel">
      <div class="panel-header"><div class="panel-title"><span class="live-dot"></span> Vulnerable Contract</div><div class="dot-row"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div></div></div>
      <textarea id="fixCode" placeholder="// Paste vulnerable contract here..."></textarea>
      <div class="example-bar">
        <span class="ex-label">Examples:</span>
        <button class="ex-btn" onclick="loadEx('fixCode','reentrancy')">Reentrancy</button>
        <button class="ex-btn" onclick="loadEx('fixCode','vault')">CryptoVault</button>
      </div>
    </div>
    <button class="run-btn orange" id="fixBtn" onclick="runFix()">
      <div class="btn-inner" id="fixBtnText">üîß Generate Fixed Contract</div>
      <div class="loader" id="fixLoader"><div class="spinner" style="border-color:var(--bg);border-top-color:transparent"></div> Generating...</div>
    </button>
    <div class="error-box" id="fixError"></div>
    <div class="results" id="fixResults">
      <div class="panel-header" style="margin-bottom:10px;background:var(--surface);border:1px solid var(--border)"><div class="panel-title">Changes Made</div></div>
      <div class="fix-changes" id="fixChanges"></div>
      <div class="panel-header" style="background:var(--surface);border:1px solid var(--border);margin-bottom:0"><div class="panel-title">Fixed Contract</div><button class="copy-btn" onclick="copyFixedCode()">Copy Code</button></div>
      <div class="panel"><div class="fix-code" id="fixOutput"></div></div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ LEADERBOARD TAB ‚îÄ‚îÄ -->
  <div class="section" id="tab-leaderboard">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;flex-wrap:wrap;gap:8px">
      <div class="lb-tabs">
        <button class="lb-tab active" onclick="switchLbTab('shame')">üò± Hall of Shame</button>
        <button class="lb-tab" onclick="switchLbTab('fame')">üèÜ Hall of Fame</button>
      </div>
      <button class="action-btn" onclick="switchTab('audit')">+ Submit Audit</button>
    </div>
    <div class="lb-header"><div>#</div><div>Contract</div><div>Score</div><div>Verdict</div><div>Issues</div></div>
    <div id="lbContent"></div>
  </div>
</div>

<footer><div class="container">AuditAI v0.4 ¬∑ <a href="/" style="color:var(--accent);text-decoration:none">Home</a> ¬∑ <a href="/blog.html" style="color:var(--accent2);text-decoration:none">Blog</a> ¬∑ Free forever ¬∑ Not a replacement for professional audits</div></footer>
<script defer src="/_vercel/insights/script.js"></script>

<script>
// ‚îÄ‚îÄ‚îÄ Examples ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const EXAMPLES = {
  erc20:`// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;
contract SimpleToken {
    string public name = "SimpleToken";
    uint256 public totalSupply;
    mapping(address => uint256) public balanceOf;
    address public owner;
    constructor(uint256 s){owner=msg.sender;totalSupply=s;balanceOf[msg.sender]=s;}
    function transfer(address to,uint256 amt) public returns(bool){
        require(balanceOf[msg.sender]>=amt);
        balanceOf[msg.sender]-=amt;balanceOf[to]+=amt;return true;
    }
    function mint(uint256 amt) public{totalSupply+=amt;balanceOf[msg.sender]+=amt;} // No access control!
}`,
  reentrancy:`// SPDX-License-Identifier: MIT
pragma solidity ^0.6.0;
contract VulnerableBank {
    mapping(address=>uint256) public balances;
    function deposit() public payable{balances[msg.sender]+=msg.value;}
    function withdraw() public{
        uint256 amt=balances[msg.sender];
        require(amt>0);
        (bool ok,)=msg.sender.call{value:amt}("");
        require(ok);
        balances[msg.sender]=0;
    }
}`,
  vault:`// SPDX-License-Identifier: MIT
pragma solidity ^0.6.0;
contract CryptoVault {
    address public owner;
    mapping(address=>uint256) public balances;
    mapping(address=>bool) public whitelisted;
    constructor() public{owner=msg.sender;}
    modifier onlyOwner(){require(tx.origin==owner);_;}
    function deposit() public payable{balances[msg.sender]+=msg.value;}
    function withdraw(uint256 amt) public{
        require(balances[msg.sender]>=amt);
        (bool ok,)=msg.sender.call{value:amt}("");require(ok);
        balances[msg.sender]-=amt;
    }
    function batchAirdrop(address[] memory r,uint256 amt) public onlyOwner{
        uint256 total=r.length*amt;
        for(uint i=0;i<r.length;i++) payable(r[i]).transfer(amt);
    }
    function setWhitelist(address u,bool s) public{whitelisted[u]=s;}
    function emergencyWithdraw() public onlyOwner{selfdestruct(payable(owner));}
}`,
  honeypot:`// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;
contract HoneypotToken {
    mapping(address=>uint256) public balanceOf;
    mapping(address=>bool) private _blacklisted;
    address private _owner;
    uint256 public buyTax=5;
    uint256 public sellTax=95;
    constructor(){_owner=msg.sender;balanceOf[msg.sender]=1000000e18;}
    function transfer(address to,uint256 amt) public returns(bool){
        require(!_blacklisted[msg.sender],"Blacklisted");
        uint256 tax=amt*sellTax/100;
        balanceOf[msg.sender]-=amt;balanceOf[to]+=amt-tax;balanceOf[_owner]+=tax;return true;
    }
    function blacklist(address u) public{require(msg.sender==_owner);_blacklisted[u]=true;}
}`
};

function loadEx(id,type){document.getElementById(id).value=EXAMPLES[type]||'';}

// ‚îÄ‚îÄ‚îÄ Tab switching ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function switchTab(name){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(t=>t.classList.remove('active'));
  document.getElementById('tab-'+name).classList.add('active');
  ['audit','token','compare','fix','leaderboard'].forEach((t,i)=>{
    if(t===name) document.querySelectorAll('.nav-tab')[i].classList.add('active');
  });
  if(name==='leaderboard') renderLeaderboard('shame');
}

// ‚îÄ‚îÄ‚îÄ Storage ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function getHistory(){try{return JSON.parse(localStorage.getItem('auditHistory')||'[]');}catch{return[];}}
function saveHistory(h){try{localStorage.setItem('auditHistory',JSON.stringify(h.slice(0,50)));}catch{}}
function updateHistCount(){const h=getHistory();document.getElementById('histCount').textContent=h.length>0?`(${h.length})`:''}

// ‚îÄ‚îÄ‚îÄ Wallet ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let walletAddr=null;
async function connectWallet(){
  if(walletAddr){walletAddr=null;document.getElementById('walletBtn').classList.remove('connected');document.getElementById('wLabel').textContent='Connect Wallet';showToast('Disconnected');return;}
  if(!window.ethereum){showToast('MetaMask not detected');return;}
  try{
    const acc=await window.ethereum.request({method:'eth_requestAccounts'});
    walletAddr=acc[0];
    const s=walletAddr.slice(0,6)+'...'+walletAddr.slice(-4);
    document.getElementById('walletBtn').classList.add('connected');
    document.getElementById('wLabel').textContent=s;
    showToast('Connected: '+s);
  }catch{showToast('Rejected');}
}

// ‚îÄ‚îÄ‚îÄ Contract Address Fetcher ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function fetchContractFromAddress(){
  const addr=document.getElementById('addrInput').value.trim();
  if(!addr||!addr.startsWith('0x')){showToast('Enter a valid 0x address');return;}
  const btn=document.getElementById('fetchAddrBtn');
  const text=document.getElementById('fetchBtnText');
  const loader=document.getElementById('fetchLoader');
  btn.disabled=true;text.style.display='none';loader.style.display='flex';
  try{
   const r = await fetch(`/api/etherscan?address=${addr}`);
    const d=await r.json();
    if(d.status==='1'&&d.result[0]&&d.result[0].SourceCode){
      let src=d.result[0].SourceCode;
      if(src.startsWith('{')) src=JSON.parse(src.slice(1,-1)).sources?Object.values(JSON.parse(src.slice(1,-1)).sources).map(s=>s.content).join('\n'):src;
      document.getElementById('auditCode').value=src;
      showToast('Contract fetched from Etherscan!');
    } else {
      showToast('Contract not verified on Etherscan');
    }
  }catch(e){showToast('Fetch failed: '+e.message);}
  finally{btn.disabled=false;text.style.display='inline';loader.style.display='none';}
}

async function fetchContractFromAddress() {
  const addr = document.getElementById('addrInput').value.trim();
  if (!addr || !addr.startsWith('0x')) { showToast('Enter a valid 0x address'); return; }
  const btn = document.getElementById('fetchAddrBtn');
  const text = document.getElementById('fetchBtnText');
  const loader = document.getElementById('fetchLoader');
  btn.disabled = true; text.style.display = 'none'; loader.style.display = 'flex';
  try {
    const r = await fetch(`/api/etherscan?address=${addr}`);
    const d = await r.json();

    console.log('Etherscan response:', d); // debug

    if (!d.result || d.result.length === 0) {
      showToast('No result from Etherscan'); return;
    }

    const sourceCode = d.result[0].SourceCode;

    if (!sourceCode || sourceCode === '') {
      showToast('Contract not verified on Etherscan ‚Äî no source code available');
      return;
    }

    // Handle multi-file contracts (wrapped in {{ }})
    let finalCode = sourceCode;
    if (sourceCode.startsWith('{{')) {
      try {
        const parsed = JSON.parse(sourceCode.slice(1, -1));
        finalCode = Object.values(parsed.sources)
          .map(s => s.content)
          .join('\n\n');
      } catch {
        finalCode = sourceCode;
      }
    }

    document.getElementById('auditCode').value = finalCode;
    showToast('‚úì Contract fetched! Ready to audit.');

  } catch (e) {
    showToast('Fetch error: ' + e.message);
    console.error(e);
  } finally {
    btn.disabled = false;
    text.style.display = 'inline';
    loader.style.display = 'none';
  }
}
// ‚îÄ‚îÄ‚îÄ AI Call ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function callAI(prompt){
  const r=await fetch('/api/audit',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({prompt})});
  const d=await r.json();
  if(d.error) throw new Error(d.error);
  return d;
}

function setLoading(btnId,textId,loaderId,on){
  document.getElementById(btnId).disabled=on;
  document.getElementById(textId).style.display=on?'none':'flex';
  const l=document.getElementById(loaderId);
  on?l.classList.add('active'):l.classList.remove('active');
}

// ‚îÄ‚îÄ‚îÄ AUDIT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let lastAudit=null,lastAuditId=null;

async function runAudit(){
  const code=document.getElementById('auditCode').value.trim();
  if(!code){showErr('auditError','Paste a contract first');return;}
  setLoading('auditBtn','auditBtnText','auditLoader',true);
  document.getElementById('auditError').classList.remove('visible');
  document.getElementById('auditResults').classList.remove('visible');
  try{
    const audit=await callAI(`You are a senior smart contract security auditor. Analyze this Solidity contract and return ONLY valid JSON, no markdown.
Contract:
${code}
JSON:
{"score":<0-100>,"verdict":"<SECURE|MODERATE RISK|HIGH RISK|CRITICAL>","summary":"<2 sentences>","findings":[{"severity":"<CRITICAL|HIGH|MEDIUM|LOW>","title":"<n>","description":"<what/where>","recommendation":"<fix>"}],"stats":{"lines":<n>,"functions":<n>,"checks_performed":<n>,"audit_time":"<Xs>"}}`);
    lastAudit=audit;lastAuditId='audit_'+Date.now();
    const h=getHistory();
    h.unshift({id:lastAuditId,date:new Date().toISOString(),score:audit.score,verdict:audit.verdict,summary:audit.summary,findings:audit.findings,stats:audit.stats,codeSnippet:code.slice(0,80)+'...',wallet:walletAddr,code:code});
    saveHistory(h);updateHistCount();
    renderAuditResults(audit,lastAuditId);
  }catch(e){showErr('auditError',e.message);}
  finally{setLoading('auditBtn','auditBtnText','auditLoader',false);}
}

function renderAuditResults(audit,id){
  const sc=audit.score>=70?'high':audit.score>=40?'medium':'low';
  const vc=audit.verdict==='SECURE'?'var(--accent)':audit.verdict==='MODERATE RISK'?'var(--warn)':'var(--danger)';
  const cnt=s=>audit.findings.filter(f=>f.severity===s).length;
  document.getElementById('auditScoreCard').innerHTML=`
    <div class="score-circle ${sc}"><div class="score-num">${audit.score}</div><div class="score-lbl">/100</div></div>
    <div class="score-info">
      <div class="score-title" style="color:${vc}">${audit.verdict}</div>
      <div class="score-summary">${audit.summary}</div>
      <div class="pills">
        ${cnt('CRITICAL')>0?`<span class="pill critical">${cnt('CRITICAL')} Critical</span>`:''}
        ${cnt('HIGH')>0?`<span class="pill high">${cnt('HIGH')} High</span>`:''}
        ${cnt('MEDIUM')>0?`<span class="pill medium">${cnt('MEDIUM')} Medium</span>`:''}
        ${cnt('LOW')>0?`<span class="pill low">${cnt('LOW')} Low</span>`:''}
        ${audit.findings.length===0?'<span class="pill safe">Clean</span>':''}
      </div>
    </div>`;
  const shareLink=window.location.origin+window.location.pathname+'?audit='+id;
  document.getElementById('auditShareLink').value=shareLink;

  // Social sharing
  const tweetText=encodeURIComponent(`I just audited a smart contract with @AuditAI and got a security score of ${audit.score}/100 ‚Äî ${audit.verdict}. Check your contracts free at`);
  const tgText=encodeURIComponent(`Smart Contract Audit Result\nScore: ${audit.score}/100\nVerdict: ${audit.verdict}\n${audit.summary}\nAudit your contracts free: ${shareLink}`);
  document.getElementById('socialShare').innerHTML=`
    <a href="https://twitter.com/intent/tweet?text=${tweetText}&url=${encodeURIComponent(shareLink)}" target="_blank" class="social-btn twitter">ùïè Share on Twitter</a>
    <a href="https://t.me/share/url?url=${encodeURIComponent(shareLink)}&text=${tgText}" target="_blank" class="social-btn telegram">‚úà Share on Telegram</a>
    <button class="social-btn copy" onclick="copyLink('auditShareLink','auditCopyBtn')">‚éò Copy Link</button>`;

  document.getElementById('auditStatsGrid').innerHTML=`
    <div class="stat-card"><div class="stat-card-title">Lines</div><div class="stat-card-val">${audit.stats.lines}</div></div>
    <div class="stat-card"><div class="stat-card-title">Functions</div><div class="stat-card-val">${audit.stats.functions}</div></div>
    <div class="stat-card"><div class="stat-card-title">Checks</div><div class="stat-card-val">${audit.stats.checks_performed}</div></div>
    <div class="stat-card"><div class="stat-card-title">Issues</div><div class="stat-card-val" style="color:${audit.findings.length>0?'var(--danger)':'var(--accent)'}">${audit.findings.length}</div></div>`;

  document.getElementById('auditFindings').innerHTML=audit.findings.length===0
    ?`<div class="finding low" style="border-left-color:var(--accent)"><div class="finding-hdr"><span class="f-sev" style="color:var(--accent)">CLEAN</span><span class="f-title">No vulnerabilities found</span></div><div class="f-desc">Contract passed all security checks.</div></div>`
    :audit.findings.map(f=>`<div class="finding ${f.severity.toLowerCase()}"><div class="finding-hdr"><span class="f-sev">${f.severity}</span><span class="f-title">${f.title}</span></div><div class="f-desc">${f.description}</div><div class="f-rec">${f.recommendation}</div></div>`).join('');

  document.getElementById('auditResults').classList.add('visible');
  document.getElementById('auditResults').scrollIntoView({behavior:'smooth',block:'start'});
}

// ‚îÄ‚îÄ‚îÄ EMAIL REPORT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function openEmailModal(){if(!lastAudit){showToast('Run an audit first');return;}document.getElementById('emailModal').classList.add('open');}
function closeEmailModal(){document.getElementById('emailModal').classList.remove('open');}

async function sendEmailReport(){
  const email = document.getElementById('emailInput').value.trim();
  if(!email || !email.includes('@')){ document.getElementById('emailStatus').textContent='Enter a valid email'; return; }
  const btn = document.getElementById('emailSendBtn');
  btn.disabled = true;
  document.getElementById('emailBtnText').style.display = 'none';
  document.getElementById('emailBtnLoader').style.display = 'inline';
  document.getElementById('emailStatus').textContent = '';
  try {
    await emailjs.send(
      'service_2yq4dan',      // ‚Üê paste your Service ID
      'template_ufmhhik',     // ‚Üê paste your Template ID
      {
        to_email:   email,
        score:      lastAudit.score,
        verdict:    lastAudit.verdict,
        summary:    lastAudit.summary,
        issues:     lastAudit.findings.length,
        share_link: document.getElementById('auditShareLink').value
      },
      'r_pXgkfgPYYzSaHtd'       // ‚Üê paste your Public Key
    );
    document.getElementById('emailStatus').textContent = '‚úì Report sent!';
    document.getElementById('emailStatus').style.color = 'var(--accent)';
    setTimeout(closeEmailModal, 2000);
  } catch(e) {
    document.getElementById('emailStatus').textContent = '‚ö† Failed: ' + e.text;
    document.getElementById('emailStatus').style.color = 'var(--danger)';
  } finally {
    btn.disabled = false;
    document.getElementById('emailBtnText').style.display = 'inline';
    document.getElementById('emailBtnLoader').style.display = 'none';
  }
}
  
// ‚îÄ‚îÄ‚îÄ TOKEN ANALYZER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function runTokenAnalysis(){
  const code=document.getElementById('tokenCode').value.trim();
  if(!code){showErr('tokenError','Paste a token contract');return;}
  setLoading('tokenBtn','tokenBtnText','tokenLoader',true);
  document.getElementById('tokenError').classList.remove('visible');
  document.getElementById('tokenResults').classList.remove('visible');
  try{
    const r=await callAI(`You are a token security expert. Analyze this Solidity token for honeypot/rugpull/tax risks. Return ONLY valid JSON.
Contract:
${code}
JSON:
{"verdict":"<SAFE|SUSPICIOUS|HONEYPOT|RUGPULL>","honeypot_risk":<0-100>,"rugpull_risk":<0-100>,"tax_risk":<0-100>,"ownership_risk":<0-100>,"buy_tax":<0-100 or null>,"sell_tax":<0-100 or null>,"summary":"<2 sentences>","flags":[{"severity":"<CRITICAL|HIGH|MEDIUM|LOW>","title":"<n>","description":"<detail>","recommendation":"<fix>"}]}`);
    renderTokenResults(r);
  }catch(e){showErr('tokenError',e.message);}
  finally{setLoading('tokenBtn','tokenBtnText','tokenLoader',false);}
}

function renderTokenResults(r){
  const vc=r.verdict==='SAFE'?'var(--accent)':r.verdict==='SUSPICIOUS'?'var(--warn)':'var(--danger)';
  document.getElementById('tokenCards').innerHTML=`
    <div class="token-card"><div class="token-card-title">Verdict</div><div class="token-card-val" style="color:${vc}">${r.verdict}</div><div class="token-card-sub">${r.summary.split('.')[0]}</div></div>
    <div class="token-card"><div class="token-card-title">Buy Tax</div><div class="token-card-val ${r.buy_tax>10?'danger':r.buy_tax>5?'warn':'safe'}">${r.buy_tax!=null?r.buy_tax+'%':'N/A'}</div></div>
    <div class="token-card"><div class="token-card-title">Sell Tax</div><div class="token-card-val ${r.sell_tax>10?'danger':r.sell_tax>5?'warn':'safe'}">${r.sell_tax!=null?r.sell_tax+'%':'N/A'}</div></div>
    <div class="token-card"><div class="token-card-title">Honeypot Risk</div><div class="token-card-val ${r.honeypot_risk>60?'danger':r.honeypot_risk>30?'warn':'safe'}">${r.honeypot_risk}%</div></div>`;
  const bars=[{label:'Honeypot Risk',val:r.honeypot_risk},{label:'Rugpull Risk',val:r.rugpull_risk},{label:'Tax Risk',val:r.tax_risk},{label:'Ownership Risk',val:r.ownership_risk}];
  document.getElementById('riskBars').innerHTML=bars.map(b=>{
    const cls=b.val>60?'high-r':b.val>30?'med-r':'low-r';
    const color=b.val>60?'var(--danger)':b.val>30?'var(--warn)':'var(--accent)';
    return `<div class="risk-row"><div class="risk-label">${b.label}</div><div class="risk-track"><div class="risk-fill ${cls}" style="width:${b.val}%"></div></div><div class="risk-pct" style="color:${color}">${b.val}%</div></div>`;
  }).join('');
  document.getElementById('tokenFindings').innerHTML=(r.flags||[]).length===0
    ?`<div class="finding low" style="border-left-color:var(--accent)"><div class="finding-hdr"><span class="f-sev" style="color:var(--accent)">CLEAN</span><span class="f-title">No red flags</span></div></div>`
    :(r.flags||[]).map(f=>`<div class="finding ${f.severity.toLowerCase()}"><div class="finding-hdr"><span class="f-sev">${f.severity}</span><span class="f-title">${f.title}</span></div><div class="f-desc">${f.description}</div><div class="f-rec">${f.recommendation}</div></div>`).join('');
  document.getElementById('tokenResults').classList.add('visible');
}

// ‚îÄ‚îÄ‚îÄ COMPARE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function runCompare(){
  const a=document.getElementById('compareA').value.trim(),b=document.getElementById('compareB').value.trim();
  if(!a||!b){showErr('compareError','Paste both contracts');return;}
  setLoading('compareBtn','compareBtnText','compareLoader',true);
  document.getElementById('compareError').classList.remove('visible');
  document.getElementById('compareResults').classList.remove('visible');
  try{
    const r=await callAI(`Compare these two Solidity contracts for security. Return ONLY valid JSON.
Contract A: ${a}
Contract B: ${b}
JSON: {"winner":"<A|B|TIE>","winner_reason":"<1 sentence>","score_a":<0-100>,"score_b":<0-100>,"only_in_a":[{"title":"<n>","severity":"<CRITICAL|HIGH|MEDIUM|LOW>","description":"<d>"}],"only_in_b":[{"title":"<n>","severity":"<CRITICAL|HIGH|MEDIUM|LOW>","description":"<d>"}],"shared_issues":[{"title":"<n>","severity":"<CRITICAL|HIGH|MEDIUM|LOW>","description":"<d>"}],"summary":"<2 sentences>"}`);
    renderCompareResults(r);
  }catch(e){showErr('compareError',e.message);}
  finally{setLoading('compareBtn','compareBtnText','compareLoader',false);}
}

function renderCompareResults(r){
  const wc=r.winner==='A'?'var(--accent2)':r.winner==='B'?'var(--purple)':'var(--warn)';
  document.getElementById('winnerBanner').innerHTML=`<div><div style="font-size:10px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;margin-bottom:4px">Winner</div><div class="winner-name" style="color:${wc}">Contract ${r.winner}</div></div><div style="flex:1"><div style="font-size:11px;color:var(--muted)">${r.winner_reason}</div><div style="display:flex;gap:14px;margin-top:6px"><span style="font-size:11px;color:var(--accent2)">A: ${r.score_a}/100</span><span style="font-size:11px;color:var(--purple)">B: ${r.score_b}/100</span></div></div>`;
  let html='';
  if((r.only_in_a||[]).length){html+=`<div class="diff-section"><div class="diff-title"><span class="diff-badge a">Only in A</span></div>${r.only_in_a.map(i=>`<div class="diff-item only-a"><strong>${i.title}</strong> (${i.severity})<br><span style="color:var(--muted)">${i.description}</span></div>`).join('')}</div>`;}
  if((r.only_in_b||[]).length){html+=`<div class="diff-section"><div class="diff-title"><span class="diff-badge b">Only in B</span></div>${r.only_in_b.map(i=>`<div class="diff-item only-b"><strong>${i.title}</strong> (${i.severity})<br><span style="color:var(--muted)">${i.description}</span></div>`).join('')}</div>`;}
  if((r.shared_issues||[]).length){html+=`<div class="diff-section"><div class="diff-title"><span class="diff-badge both">Shared</span></div>${r.shared_issues.map(i=>`<div class="diff-item shared"><strong>${i.title}</strong> (${i.severity})<br><span style="color:var(--muted)">${i.description}</span></div>`).join('')}</div>`;}
  if(!html)html=`<div class="finding low" style="border-left-color:var(--accent)"><div class="finding-hdr"><span class="f-sev" style="color:var(--accent)">TIE</span><span class="f-title">No significant differences</span></div></div>`;
  document.getElementById('compareContent').innerHTML=html;
  document.getElementById('compareResults').classList.add('visible');
}

// ‚îÄ‚îÄ‚îÄ FIX ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let fixedCode='';
async function runFix(){
  const code=document.getElementById('fixCode').value.trim();
  if(!code){showErr('fixError','Paste a contract');return;}
  setLoading('fixBtn','fixBtnText','fixLoader',true);
  document.getElementById('fixError').classList.remove('visible');
  document.getElementById('fixResults').classList.remove('visible');
  try{
    const r=await callAI(`Fix all vulnerabilities in this Solidity contract. Return ONLY valid JSON.
Contract: ${code}
JSON: {"changes":[{"title":"<fix>","description":"<what changed>"}],"fixed_code":"<complete fixed contract with \\n for newlines>"}`);
    fixedCode=r.fixed_code||'';
    document.getElementById('fixChanges').innerHTML=(r.changes||[]).map(c=>`<div class="fix-change"><div class="fix-change-title">‚úì ${c.title}</div><div class="fix-change-desc">${c.description}</div></div>`).join('');
    document.getElementById('fixOutput').textContent=fixedCode;
    document.getElementById('fixResults').classList.add('visible');
  }catch(e){showErr('fixError',e.message);}
  finally{setLoading('fixBtn','fixBtnText','fixLoader',false);}
}
function copyFixedCode(){navigator.clipboard.writeText(fixedCode).then(()=>showToast('Fixed code copied!'));}

// ‚îÄ‚îÄ‚îÄ LEADERBOARD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let lbMode='shame';
function switchLbTab(mode){
  lbMode=mode;
  document.querySelectorAll('.lb-tab').forEach((t,i)=>t.classList.toggle('active',(i===0&&mode==='shame')||(i===1&&mode==='fame')));
  renderLeaderboard(mode);
}
function renderLeaderboard(mode){
  const h=getHistory();
  if(!h.length){document.getElementById('lbContent').innerHTML=`<div class="lb-empty">No audits yet.<br>Run a security audit to appear here!</div>`;return;}
  const sorted=[...h].sort((a,b)=>mode==='shame'?a.score-b.score:b.score-a.score);
  document.getElementById('lbContent').innerHTML=sorted.map((item,i)=>{
    const sc=item.score>=70?'high':item.score>=40?'medium':'low';
    const vc=item.score>=70?'var(--accent)':item.score>=40?'var(--warn)':'var(--danger)';
    const medal=i===0?'ü•á':i===1?'ü•à':i===2?'ü•â':i+1;
    const rc=i===0?'gold':i===1?'silver':i===2?'bronze':'';
    const date=new Date(item.date).toLocaleDateString('en-GB',{day:'2-digit',month:'short'});
    const issues=item.findings?item.findings.length:0;
    return `<div class="lb-row"><div class="lb-rank ${rc}">${medal}</div><div><div class="lb-contract-name">${item.codeSnippet.slice(0,28).replace('// ','').trim()}...</div><div class="lb-contract-date">${date}${item.wallet?' ¬∑ '+item.wallet.slice(0,6)+'...':''}</div></div><div class="lb-score ${sc}">${item.score}</div><div class="lb-verdict" style="color:${vc}">${item.verdict}</div><div class="lb-issues ${issues===0?'zero':''}">${issues}</div></div>`;
  }).join('');
}

// ‚îÄ‚îÄ‚îÄ History ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function openHistory(){renderHistoryDrawer();document.getElementById('historyDrawer').classList.add('open');document.getElementById('drawerOverlay').classList.add('open');}
function closeHistory(){document.getElementById('historyDrawer').classList.remove('open');document.getElementById('drawerOverlay').classList.remove('open');}
function renderHistoryDrawer(){
  const h=getHistory();
  if(!h.length){document.getElementById('historyBody').innerHTML=`<div style="text-align:center;padding:40px;color:var(--muted);font-size:12px">No audits yet.</div>`;return;}
  document.getElementById('historyBody').innerHTML=h.map((item,i)=>{
    const sc=item.score>=70?'high':item.score>=40?'medium':'low';
    const date=new Date(item.date).toLocaleDateString('en-GB',{day:'2-digit',month:'short',hour:'2-digit',minute:'2-digit'});
    return `<div class="h-item" onclick="loadFromHistory(${i})"><div class="h-item-top"><span class="h-score ${sc}">${item.score}/100</span><span class="h-date">${date}</span><button class="h-del" onclick="deleteHistory(event,${i})">‚úï</button></div><div class="h-verdict" style="color:${item.score>=70?'var(--accent)':item.score>=40?'var(--warn)':'var(--danger)'}">${item.verdict}</div><div class="h-snippet">${item.codeSnippet}</div></div>`;
  }).join('');
}
function loadFromHistory(i){const item=getHistory()[i];if(!item)return;lastAudit=item;lastAuditId=item.id;renderAuditResults(item,item.id);closeHistory();switchTab('audit');}
function deleteHistory(e,i){e.stopPropagation();const h=getHistory();h.splice(i,1);saveHistory(h);updateHistCount();renderHistoryDrawer();showToast('Removed');}
function clearHistory(){if(!confirm('Clear all?'))return;saveHistory([]);updateHistCount();renderHistoryDrawer();showToast('Cleared');}

// ‚îÄ‚îÄ‚îÄ Utils ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function submitToLeaderboard(){if(!lastAudit)return;switchTab('leaderboard');showToast('Submitted to leaderboard!');}
function sendToFix(){const code=document.getElementById('auditCode').value;document.getElementById('fixCode').value=code;switchTab('fix');showToast('Sent to Fix Suggester');}
function showErr(id,msg){const e=document.getElementById(id);e.textContent='‚ö† '+msg;e.classList.add('visible');}
function showToast(msg){const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2500);}
function copyLink(inputId,btnId){
  const val=document.getElementById(inputId).value;if(!val)return;
  navigator.clipboard.writeText(val).then(()=>{
    const btn=document.getElementById(btnId);btn.textContent='‚úì Copied!';btn.classList.add('copied');showToast('Copied!');
    setTimeout(()=>{btn.textContent='Copy';btn.classList.remove('copied');},2000);
  });
}
function downloadReport(){
  if(!lastAudit)return;const d=lastAudit;const date=new Date().toISOString().split('T')[0];
  let r=`AUDITAI SECURITY REPORT ‚Äî ${date}\nWallet: ${walletAddr||'Not connected'}\n${'='.repeat(50)}\nSCORE: ${d.score}/100\nVERDICT: ${d.verdict}\n\nSUMMARY:\n${d.summary}\n\nFINDINGS\n${'='.repeat(50)}\n`;
  if(!d.findings.length)r+='\nNo vulnerabilities.\n';
  else d.findings.forEach((f,i)=>{r+=`\n[${i+1}] ${f.severity} ‚Äî ${f.title}\n${f.description}\nFIX: ${f.recommendation}\n`;});
  r+=`\nAuditAI ‚Äî Free Smart Contract Security Platform\n`;
  const blob=new Blob([r],{type:'text/plain'});const url=URL.createObjectURL(blob);
  const a=document.createElement('a');a.href=url;a.download=`audit-${date}.txt`;a.click();URL.revokeObjectURL(url);
}

// ‚îÄ‚îÄ‚îÄ Init ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
updateHistCount();
const params=new URLSearchParams(window.location.search);
const sharedId=params.get('audit');
if(sharedId){const item=getHistory().find(h=>h.id===sharedId);if(item){lastAudit=item;lastAuditId=item.id;renderAuditResults(item,item.id);showToast('Shared audit loaded');}}
if(window.ethereum){window.ethereum.on('accountsChanged',acc=>{if(!acc.length){walletAddr=null;document.getElementById('walletBtn').classList.remove('connected');document.getElementById('wLabel').textContent='Connect Wallet';}});}
</script>
</body>
</html>
